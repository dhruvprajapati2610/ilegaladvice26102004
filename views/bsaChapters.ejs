<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>iLegal Home</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.1.0/remixicon.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.1.0/remixicon.css"
    />
    <link rel="icon" type="image/png" href="../uploads/logo.png" />
    <link rel="stylesheet" href="/powChapters.css" />
  </head>
  <body>
    <%- include('partials/header') %>
    <div class="body">
      <div class="main-body">
        <div class="ipc-container">
          <div class="search-box-container">
            <div class="search-box">
              <form onsubmit="event.preventDefault();">
                <input type="search" name="search" placeholder="Search for sections" id="search" oninput="performSearch()">
                <i class="fa-solid fa-magnifying-glass"></i>
              </form>
            </div>
          </div>
          <div class="ipc-heading">
            <h1>The Bharatiya Sakshya Adhiniyam, 2023 - Chapters</h1>
          </div>
          <div class="ipc-box">
            <ul class="ipc-list">
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=1">
                      <span class="sakshya-chp">Chapter 1 - Preliminary</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=2">
                      <span class="sakshya-chp">Chapter 2 - Relevancy of Facts</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=3">
                      <span class="sakshya-chp">Chapter 3 - Facts Which Need Not Be Proved</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=4">
                      <span class="sakshya-chp">Chapter 4 - Oral Evidence</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=5">
                      <span class="sakshya-chp">Chapter 5 - Documentary Evidence</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=6">
                      <span class="sakshya-chp">Chapter 6 - Exclusion of Oral by Documentary Evidence</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=7">
                      <span class="sakshya-chp">Chapter 7 - Burden of Proof</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=8">
                      <span class="sakshya-chp">Chapter 8 - Estoppel</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=9">
                      <span class="sakshya-chp">Chapter 9 - Witnesses</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=10">
                      <span class="sakshya-chp">Chapter 10 - Examination of Witnesses</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=11">
                      <span class="sakshya-chp">Chapter 11 - Improper Admission and Rejection of Evidence</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=12">
                      <span class="sakshya-chp">Chapter 12 - Repeal and Savings</span>
                    </a>
                  </span>
                </li>
              </ul>
              
              
              
          </div>
        </div>
      </div>
      <%- include('partials/footer') %>
    </div>

    <script>
      const showmenu = (toggleId, navId) => {
        const toggle = document.getElementById(toggleId),
          nav = document.getElementById(navId);

        toggle.addEventListener("click", () => {
          nav.classList.toggle("show-menu");
          toggle.classList.toggle("show-icon");
        });
      };
      showmenu("nav-toggle", "nav-menu");

      const dropdownItems = document.querySelectorAll(".dropdown-item");

      dropdownItems.forEach((item) => {
        const dropdownButton = item.querySelector(".dropdown-button");

        dropdownButton.addEventListener("click", () => {
          const showDropdown = document.querySelector(".show-dropdown");

          toggleItem(item);

          if (showDropdown && showDropdown !== item) {
            toggleItem(showDropdown);
          }
        });
      });

      const toggleItem = (item) => {
        const dropdownContainer = item.querySelector(".dropdown-container");

        if (item.classList.contains("show-dropdown")) {
          dropdownContainer.removeAttribute("style");
          item.classList.remove("show-dropdown");
        } else {
          dropdownContainer.style.height =
            dropdownContainer.scrollHeight + "px";
          item.classList.add("show-dropdown");
        }
      };
      const mediaQuery = matchMedia("(min-width:1118px)"),
        dropdownContainer = document.querySelectorAll(".dropdown-container");

      const removeStyle = () => {
        if (mediaQuery.matches) {
          dropdownContainer.forEach((e) => {
            e.removeAttribute("style");
          });

          dropdownContainer.forEach((e) => {
            e.classList.remove("show-dropdown");
          });
        }
      };
      addEventListener("resize", removeStyle);

      const crpcChp = document.querySelector(".crpc-chp");
      const crpcSections = document.querySelector(".crpc-sub-chapters");

      crpcChp.onclick = () => {
        crpcSections.classList.toggle("crpc-subsec-active");
      };

      //SEARCH BSA SECTIONS
async function performSearch() {
    
    const searchInput = document.getElementById('search');
    const resultsContainer = document.querySelector('.ipc-list');
    const searchTerm = searchInput.value.trim();
    
    if (!searchTerm) {
        resultsContainer.innerHTML = `
             <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=1">
                      <span class="sakshya-chp">Chapter 1 - Preliminary</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=2">
                      <span class="sakshya-chp">Chapter 2 - Relevancy of Facts</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=3">
                      <span class="sakshya-chp">Chapter 3 - Facts Which Need Not Be Proved</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=4">
                      <span class="sakshya-chp">Chapter 4 - Oral Evidence</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=5">
                      <span class="sakshya-chp">Chapter 5 - Documentary Evidence</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=6">
                      <span class="sakshya-chp">Chapter 6 - Exclusion of Oral by Documentary Evidence</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=7">
                      <span class="sakshya-chp">Chapter 7 - Burden of Proof</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=8">
                      <span class="sakshya-chp">Chapter 8 - Estoppel</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=9">
                      <span class="sakshya-chp">Chapter 9 - Witnesses</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=10">
                      <span class="sakshya-chp">Chapter 10 - Examination of Witnesses</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=11">
                      <span class="sakshya-chp">Chapter 11 - Improper Admission and Rejection of Evidence</span>
                    </a>
                  </span>
                </li>
                <li>
                  <span class="arrow">➤</span>
                  <span class="sakshya-link">
                    <a href="/bsa/bsa_sections?chapter=12">
                      <span class="sakshya-chp">Chapter 12 - Repeal and Savings</span>
                    </a>
                  </span>
                </li>
        `;
        return;
    }

    try {
        const response = await fetch(`/bsa/bsa_sections/search?search=${encodeURIComponent(searchTerm)}`);
        const data = await response.json();
        console.log(data);

        if (data.success) {
            if (data.data.length > 0) {
                resultsContainer.innerHTML = data.data
                    .map(section => `
                        <li>
            <span class="arrow">➤</span>
            <span class="crpc-link">
                <a href="/bsa/bsa_section?section_number=${section.section_number}">
                <span class="crpc-chp">Section ${section.section_number} - ${section.section_name}</span>
                </a>
            </span>
        </li>
                    `)
                    .join('');
            } else {
                resultsContainer.innerHTML = '<p>No results found.</p>';
            }
        } else {
            resultsContainer.innerHTML = `<p>${data.message}</p>`;
        }
    } catch (error) {
        console.error('Error performing search:', error);
        resultsContainer.innerHTML = '<p>An error occurred while fetching results.</p>';
    }
}

    </script>
  </body>
</html>
